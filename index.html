<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vankedisicoin Shiller</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:"Inter",sans-serif;}
  body{
    min-height:100vh;display:flex;flex-direction:column;justify-content:space-between;
    background:linear-gradient(270deg,#7f00ff,#e100ff,#00c3ff,#ff7300);
    background-size:800% 800%;animation:bgShift 20s ease infinite;color:white;
  }
  @keyframes bgShift{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
  }
  header{
    text-align:center;
    padding:25px 10px 10px;
    font-size:1.8rem;
    font-weight:700;
    position:relative;
  }
  main{
    flex:1;display:flex;flex-direction:column;
    align-items:center;justify-content:center;padding:20px;
  }
  .card{
    background:rgba(255,255,255,0.1);
    padding:20px;border-radius:15px;
    backdrop-filter:blur(8px);
    width:90%;max-width:400px;text-align:center;
    box-shadow:0 0 15px rgba(0,0,0,0.3);
  }
  input,textarea{
    width:100%;padding:10px;margin:8px 0;
    border:none;border-radius:8px;
  }
  button{
    width:100%;padding:10px;margin:8px 0;
    border:none;border-radius:8px;
    background:#fff;color:#333;
    font-weight:600;cursor:pointer;
    transition:0.3s;
  }
  button:hover{background:#ddd;}
  nav{
    display:flex;justify-content:space-around;
    padding:15px;background:rgba(0,0,0,0.3);
    position:fixed;bottom:0;width:100%;
  }
  nav button{flex:1;margin:0 5px;}
  .hidden{display:none;}
  /* Dil butonu dÃ¼zenlendi */
  .lang-btn{
    position:absolute;
    right:15px;
    top:50%;
    transform:translateY(30%);
    background:rgba(255,255,255,0.25);
    color:#fff;
    border:none;
    padding:8px 12px;
    border-radius:8px;
    cursor:pointer;
    font-size:1rem;
    transition:0.3s;
  }
  .lang-btn:hover{
    background:rgba(255,255,255,0.4);
  }
  .task{
    background:rgba(255,255,255,0.1);
    padding:10px;margin-top:10px;border-radius:10px;
  }
  .success{color:#00ff9d;font-weight:600;margin-top:10px;}
</style>
</head>
<body>
<header>
  Vankedisicoin Shiller
  <button class="lang-btn" id="langToggle">ðŸ‡¬ðŸ‡§</button>
</header>

<main>
  <!-- Login/Register -->
  <div id="auth" class="card">
    <h2 id="authTitle">Login</h2>
    <input id="username" placeholder="Username">
    <input id="password" type="password" placeholder="Password">
    <button id="loginBtn">Login</button>
    <p id="switchText">No account? <span id="toggleMode" style="text-decoration:underline;cursor:pointer;">Register</span></p>
  </div>

  <!-- Tasks -->
  <div id="taskPage" class="card hidden">
    <h2 id="taskTitle">Shiller Tasks</h2>
    <div id="taskList"></div>

    <div id="adminPanel" class="hidden">
      <h3 id="adminTitle">Add New Task</h3>
      <input id="taskName" placeholder="Task Name">
      <input id="taskLink" placeholder="Task Link">
      <textarea id="taskDesc" placeholder="Task Description"></textarea>
      <button id="addTaskBtn">Add Task</button>
    </div>
  </div>

  <!-- Profile -->
  <div id="profilePage" class="card hidden">
    <h2 id="profileTitle">Profile</h2>
    <p id="userDisplay"></p>
    <input id="newUsername" placeholder="New Username (1/week)">
    <input id="newPassword" type="password" placeholder="New Password">
    <button id="saveChangesBtn">Save Changes</button>
    <button id="logoutBtn">Logout</button>
  </div>
</main>

<!-- Bottom Nav -->
<nav id="bottomNav" class="hidden">
  <button id="taskBtn">ðŸ§© Shiller Task</button>
  <button id="profileBtn">ðŸ‘¤ Profile</button>
</nav>

<script>
let users = JSON.parse(localStorage.getItem("users")||"{}");
let currentUser = localStorage.getItem("currentUser");
let tasks = JSON.parse(localStorage.getItem("tasks")||"[]");
let lang = localStorage.getItem("lang") || "en";
const adminName = "vankedisitamirci";
const adminPass = "Tamirci198347733";

function saveData(){
  localStorage.setItem("users",JSON.stringify(users));
  localStorage.setItem("tasks",JSON.stringify(tasks));
}
function showPage(id){
  document.querySelectorAll("main > div").forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}
function showNav(show){
  document.getElementById("bottomNav").classList[show?"remove":"add"]("hidden");
}
function loadTasks(){
  const list=document.getElementById("taskList");
  list.innerHTML="";
  tasks.forEach((t,i)=>{
    const div=document.createElement("div");
    div.className="task";
    div.innerHTML=`<h4>${t.name}</h4><p>${t.desc}</p>
    <a href="${t.link}" target="_blank"><button>${text.goTask}</button></a>
    <input placeholder="${text.enterLink}" id="proof${i}">
    <button onclick="submitTask(${i})">${text.submit}</button>
    <div id="result${i}"></div>`;
    list.appendChild(div);
  });
}
function submitTask(i){
  const proof=document.getElementById("proof"+i).value.trim();
  const result=document.getElementById("result"+i);
  if(proof.startsWith("https://x.com"))
    result.innerHTML=`<p class='success'>${text.success}</p>`;
  else result.innerHTML=`<p style='color:#ff4f4f'>${text.fail}</p>`;
}

function switchLang(){
  lang = lang==="en"?"tr":"en";
  localStorage.setItem("lang",lang);
  renderLang();
}
const langs = {
  en:{login:"Login",register:"Register",noacc:"No account? ",hasacc:"Have an account? ",addTask:"Add Task",success:"ðŸŽ‰ Congrats! Task Done!",fail:"Please submit a valid link.",goTask:"Go to Task",enterLink:"Paste your X link here",submit:"Submit",profile:"Profile",logout:"Logout",save:"Save Changes",taskTitle:"Shiller Tasks"},
  tr:{login:"GiriÅŸ Yap",register:"KayÄ±t Ol",noacc:"HesabÄ±n yok mu? ",hasacc:"Zaten hesabÄ±n var mÄ±? ",addTask:"GÃ¶rev Ekle",success:"ðŸŽ‰ Tebrikler! GÃ¶revi DoÄŸru YaptÄ±n!",fail:"LÃ¼tfen geÃ§erli bir baÄŸlantÄ± girin.",goTask:"GÃ¶reve Git",enterLink:"X baÄŸlantÄ±nÄ± buraya yapÄ±ÅŸtÄ±r",submit:"GÃ¶nder",profile:"Profil",logout:"Ã‡Ä±kÄ±ÅŸ Yap",save:"DeÄŸiÅŸiklikleri Kaydet",taskTitle:"Shiller GÃ¶revleri"}
};
let text = {};
function renderLang(){
  text = langs[lang];
  document.getElementById("authTitle").innerText = isRegister? text.register : text.login;
  document.getElementById("loginBtn").innerText = isRegister? text.register : text.login;
  document.getElementById("switchText").innerHTML = (isRegister? text.hasacc : text.noacc) + `<span id="toggleMode" style="text-decoration:underline;cursor:pointer;">${isRegister? text.login : text.register}</span>`;
  document.getElementById("taskTitle").innerText=text.taskTitle;
  document.getElementById("addTaskBtn").innerText=text.addTask;
  document.getElementById("profileTitle").innerText=text.profile;
  document.getElementById("logoutBtn").innerText=text.logout;
  document.getElementById("saveChangesBtn").innerText=text.save;
  document.getElementById("langToggle").innerText = lang==="en"?"ðŸ‡¬ðŸ‡§":"ðŸ‡¹ðŸ‡·";
  if(document.getElementById("toggleMode")) document.getElementById("toggleMode").onclick=toggleAuthMode;
}
document.getElementById("langToggle").onclick=switchLang;

let isRegister = false;
function toggleAuthMode(){
  isRegister = !isRegister;
  renderLang();
}
document.getElementById("toggleMode").onclick=toggleAuthMode;

document.getElementById("loginBtn").onclick=()=>{
  let u=document.getElementById("username").value.trim();
  let p=document.getElementById("password").value.trim();
  if(!u||!p)return alert("Please fill all fields");
  if(isRegister){
    if(users[u])return alert("Username already taken!");
    users[u]={password:p,lastChange:0};
    saveData();
    alert("Registered successfully!");
    isRegister=false;
    renderLang();
  }else{
    if(users[u] && users[u].password===p){
      currentUser=u;
      localStorage.setItem("currentUser",u);
      startApp();
    }else alert("Wrong username or password!");
  }
};

function startApp(){
  showPage("taskPage");
  showNav(true);
  document.getElementById("userDisplay").innerText="@"+currentUser;
  loadTasks();
  const adminPanel=document.getElementById("adminPanel");
  if(currentUser===adminName && users[currentUser].password===adminPass)
    adminPanel.classList.remove("hidden");
  else adminPanel.classList.add("hidden");
}

document.getElementById("taskBtn").onclick=()=>{showPage("taskPage");loadTasks();};
document.getElementById("profileBtn").onclick=()=>showPage("profilePage");

document.getElementById("logoutBtn").onclick=()=>{
  localStorage.removeItem("currentUser");
  location.reload();
};

document.getElementById("addTaskBtn").onclick=()=>{
  let name=document.getElementById("taskName").value.trim();
  let link=document.getElementById("taskLink").value.trim();
  let desc=document.getElementById("taskDesc").value.trim();
  if(!name||!link)return alert("Fill all fields!");
  tasks.push({name,link,desc});
  saveData();
  document.getElementById("taskName").value="";
  document.getElementById("taskLink").value="";
  document.getElementById("taskDesc").value="";
  loadTasks();
  alert("Task added successfully!");
};

document.getElementById("saveChangesBtn").onclick=()=>{
  let newU=document.getElementById("newUsername").value.trim();
  let newP=document.getElementById("newPassword").value.trim();
  let now=Date.now();
  if(newU && !users[newU] && (now-(users[currentUser].lastChange||0)>7*24*60*60*1000)){
    users[newU]=users[currentUser];
    delete users[currentUser];
    currentUser=newU;
    users[currentUser].lastChange=now;
    localStorage.setItem("currentUser",newU);
  }
  if(newP)users[currentUser].password=newP;
  saveData();
  alert("Changes saved!");
  document.getElementById("newUsername").value="";
  document.getElementById("newPassword").value="";
  document.getElementById("userDisplay").innerText="@"+currentUser;
};

if(currentUser && users[currentUser]) startApp();
renderLang();
</script>
</body>
</html>
