<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Vankedisicoin Shiller</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:"Inter",sans-serif;user-select:none;}
  html,body{
    width:100%;height:100%;overflow:hidden;
    background:linear-gradient(270deg,#7f00ff,#e100ff,#00c3ff,#ff7300);
    background-size:800% 800%;
    animation:bgShift 20s ease infinite;
    color:white;display:flex;flex-direction:column;
  }
  @keyframes bgShift{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
  }
  header{
    text-align:center;padding:25px 10px 10px;
    font-size:1.8rem;font-weight:700;position:relative;
  }
  .lang-btn{
    position:absolute;right:15px;top:50%;
    transform:translateY(30%);
    background:rgba(255,255,255,0.25);
    color:#fff;border:none;padding:8px 12px;
    border-radius:8px;cursor:pointer;
  }
  main{
    flex:1;display:flex;flex-direction:column;
    align-items:center;justify-content:center;padding:10px;
  }
  .card{
    background:rgba(255,255,255,0.1);
    padding:20px;border-radius:15px;
    backdrop-filter:blur(8px);
    width:90%;max-width:400px;text-align:center;
    box-shadow:0 0 15px rgba(0,0,0,0.3);
  }
  input,textarea{
    width:100%;padding:10px;margin:8px 0;
    border:none;border-radius:8px;
  }
  button{
    width:100%;padding:10px;margin:8px 0;
    border:none;border-radius:8px;
    background:#fff;color:#333;font-weight:600;
    cursor:pointer;transition:0.3s;
  }
  button:hover{background:#ddd;}
  nav{
    display:flex;justify-content:space-around;
    padding:15px;background:rgba(0,0,0,0.3);
    position:fixed;bottom:0;width:100%;
  }
  nav button{flex:1;margin:0 5px;}
  .hidden{display:none;}
  .task{
    background:rgba(255,255,255,0.1);
    padding:10px;margin-top:10px;border-radius:10px;
  }
  .delete-btn{
    background:#ff4f4f;color:white;font-weight:700;
  }
  .delete-btn:hover{background:#ff2a2a;}
  .success{color:#00ff9d;font-weight:600;margin-top:10px;}
</style>
</head>
<body>
<header>
  Vankedisicoin Shiller
  <button class="lang-btn" id="langToggle">ðŸ‡¬ðŸ‡§</button>
</header>

<main>
  <!-- Login/Register -->
  <div id="auth" class="card">
    <h2 id="authTitle">Login</h2>
    <input id="username" placeholder="Username">
    <input id="password" type="password" placeholder="Password">
    <button id="loginBtn">Login</button>
    <p id="switchText">No account? <span id="toggleMode" style="text-decoration:underline;cursor:pointer;">Register</span></p>
  </div>

  <!-- Tasks -->
  <div id="taskPage" class="card hidden">
    <h2 id="taskTitle">Shiller Tasks</h2>
    <div id="taskList"></div>

    <div id="adminPanel" class="hidden">
      <h3 id="adminTitle">Add New Task</h3>
      <input id="taskName" placeholder="Task Name">
      <input id="taskLink" placeholder="Task Link">
      <textarea id="taskDesc" placeholder="Task Description"></textarea>
      <button id="addTaskBtn">Add Task</button>
    </div>
  </div>

  <!-- Profile -->
  <div id="profilePage" class="card hidden">
    <h2 id="profileTitle">Profile</h2>
    <p id="userDisplay"></p>
    <input id="newUsername" placeholder="New Username">
    <input id="newPassword" type="password" placeholder="New Password">
    <button id="saveChangesBtn">Save Changes</button>
    <button id="logoutBtn">Logout</button>
  </div>
</main>

<!-- Bottom Nav -->
<nav id="bottomNav" class="hidden">
  <button id="taskBtn">ðŸ§© Shiller Task</button>
  <button id="profileBtn">ðŸ‘¤ Profile</button>
</nav>

<script>
let users = JSON.parse(localStorage.getItem("users")||"{}");
let currentUser = localStorage.getItem("currentUser");
let tasks = JSON.parse(localStorage.getItem("tasks")||"[]");
let lang = localStorage.getItem("lang") || "en";
const adminName = "vankedisitamirci";
const adminPass = "Tamirci198347733";

function saveData(){
  localStorage.setItem("users",JSON.stringify(users));
  localStorage.setItem("tasks",JSON.stringify(tasks));
}

function showPage(id){
  document.querySelectorAll("main > div").forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

function showNav(show){
  document.getElementById("bottomNav").classList[show?"remove":"add"]("hidden");
}

function loadTasks(){
  const list=document.getElementById("taskList");
  list.innerHTML="";
  const user=users[currentUser];
  const done=user.completedTasks||[];
  tasks.forEach((t,i)=>{
    if(currentUser!==adminName && done.includes(i)) return;
    const div=document.createElement("div");
    div.className="task";
    div.innerHTML=`
      <h4>${t.name}</h4>
      <p>${t.desc}</p>
      <a href="${t.link}" target="_blank"><button>${text.goTask}</button></a>
      <input placeholder="${text.enterLink}" id="proof${i}">
      <button onclick="submitTask(${i})">${text.submit}</button>
      <div id="result${i}"></div>
    `;
    if(currentUser===adminName && user.password===adminPass){
      const del=document.createElement("button");
      del.className="delete-btn";
      del.innerText="Delete Task";
      del.onclick=()=>deleteTask(i);
      div.appendChild(del);
    }
    list.appendChild(div);
  });
}

function deleteTask(index){
  if(confirm("Delete this task?")){
    tasks.splice(index,1);
    saveData();
    loadTasks();
  }
}

function submitTask(i){
  const proof=document.getElementById("proof"+i).value.trim();
  const result=document.getElementById("result"+i);
  if(proof.startsWith("https://x.com")){
    result.innerHTML=`<p class='success'>${text.success}</p>`;
    users[currentUser].completedTasks.push(i);
    saveData();
    setTimeout(loadTasks,1000);
  } else result.innerHTML=`<p style='color:#ff4f4f'>${text.fail}</p>`;
}

function switchLang(){
  lang=lang==="en"?"tr":"en";
  localStorage.setItem("lang",lang);
  renderLang();
}

const langs={
  en:{login:"Login",register:"Register",noacc:"No account?",hasacc:"Have an account?",goTask:"Go to Task",enterLink:"Paste your x.com link",submit:"Submit",success:"ðŸŽ‰ Congrats! Task Done!",fail:"Invalid link!",addTask:"Add Task"},
  tr:{login:"GiriÅŸ Yap",register:"KayÄ±t Ol",noacc:"HesabÄ±n yok mu?",hasacc:"HesabÄ±n var mÄ±?",goTask:"GÃ¶reve Git",enterLink:"x.com baÄŸlantÄ±nÄ± yapÄ±ÅŸtÄ±r",submit:"GÃ¶nder",success:"ðŸŽ‰ Tebrikler GÃ¶revi TamamladÄ±n!",fail:"GeÃ§ersiz baÄŸlantÄ±!",addTask:"GÃ¶rev Ekle"}
};

function renderLang(){
  const t=langs[lang];
  text=t;
  document.getElementById("authTitle").innerText=t.login;
  document.getElementById("loginBtn").innerText=t.login;
  document.getElementById("toggleMode").innerText=t.register;
  document.getElementById("langToggle").innerText=(lang==="en"?"ðŸ‡¹ðŸ‡·":"ðŸ‡¬ðŸ‡§");
  loadTasks();
}

document.getElementById("langToggle").onclick=switchLang;
renderLang();

document.getElementById("loginBtn").onclick=()=>{
  const u=document.getElementById("username").value.trim();
  const p=document.getElementById("password").value.trim();
  if(!u||!p)return alert("Enter username and password");
  if(registerMode){
    if(users[u])return alert("User exists");
    users[u]={password:p,completedTasks:[]};
    saveData();alert("Account created");
  }else{
    if(!users[u]||users[u].password!==p)return alert("Wrong login");
  }
  currentUser=u;
  localStorage.setItem("currentUser",u);
  showPage("taskPage");
  showNav(true);
  if(u===adminName && p===adminPass)
    document.getElementById("adminPanel").classList.remove("hidden");
  loadTasks();
};

let registerMode=false;
document.getElementById("toggleMode").onclick=()=>{
  registerMode=!registerMode;
  const t=langs[lang];
  document.getElementById("authTitle").innerText=registerMode?t.register:t.login;
  document.getElementById("loginBtn").innerText=registerMode?t.register:t.login;
  document.getElementById("switchText").innerHTML=registerMode?`${t.hasacc} <span id="toggleMode" style="text-decoration:underline;cursor:pointer;">${t.login}</span>`:`${t.noacc} <span id="toggleMode" style="text-decoration:underline;cursor:pointer;">${t.register}</span>`;
  document.getElementById("toggleMode").onclick=arguments.callee;
};

document.getElementById("taskBtn").onclick=()=>{showPage("taskPage");loadTasks();};
document.getElementById("profileBtn").onclick=()=>{showPage("profilePage");document.getElementById("userDisplay").innerText="ðŸ‘¤ "+currentUser;};

document.getElementById("logoutBtn").onclick=()=>{localStorage.removeItem("currentUser");location.reload();};

document.getElementById("addTaskBtn").onclick=()=>{
  const n=document.getElementById("taskName").value.trim();
  const l=document.getElementById("taskLink").value.trim();
  const d=document.getElementById("taskDesc").value.trim();
  if(!n||!l)return alert("Enter task info");
  tasks.push({name:n,link:l,desc:d});
  saveData();loadTasks();
};
</script>
</body>
</html>
